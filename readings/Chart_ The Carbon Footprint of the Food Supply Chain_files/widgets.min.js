!function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,d=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw d}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var a=new Event("feedierWidget.init"),n=new Event("feedierWidget.close"),d=new Event("feedierWidget.show");window.feedierWidget={init:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new URL("https://feedier.com");this.endpoint=t.protocol+"//api."+t.hostname+"/v1",this.home=t.origin,this.debug=!0,this.utm="?utm_medium=widget&utm_source=feedier&utm_campaign=feedier-internal-awareness-2018-03-23&utm_content=widget-click";var r=this,n=function(e){if(!r.debug)return null;console.warn("[FEEDIER] "+e)},d=function(e,t){var a,n='<div class="feedier-widget__wrapper">\n                    <div class="feedier-widget__testimonial_wrapper">',d=i(t.testimonials);try{for(d.s();!(a=d.n()).done;){var s=a.value;n+='<div class="feedier-widget__testimonial">\n                        <div class="feedier-widget__testimonial__content">\n                        <div class="feedier-widget__score"></div>\n                        <div class="feedier-widget__content">\n                        <div class="feedier-widget__name"><span>'.concat(s.testimonial_content,'</span></div>\n                    <div class="feedier-widget__description"><span>').concat(s.left_by,"</span></div>\n                    </div>\n                    </div>\n                    </div>")}}catch(e){d.e(e)}finally{d.f()}n+='</div>\n                    <div class="feedier-widget__control">\n                        <i class="fa-arrow-icon fa-right-arrow"></i>\n                        <i class="fa-arrow-icon fa-left-arrow disabled"></i>\n                    </div>\n                    <div class="feedier-widget__footer">\n                        <div class="feedier-widget__by"><span></span></div>\n                    </div>\n                </div>',e.insertAdjacentHTML("beforeend",n),t.white_label||(r.helpers.find(e,".feedier-widget__by span").innerHTML='<a href="'.concat(r.home+r.utm,'"\n                                             title="Feedier"\n                                             target="_blank">\n                                             ').concat(t.localization.by,' <img src="').concat(r.home+"/images/global/logo-dark.png",'">\n                                          </a>'));var l=e.querySelector(".feedier-widget__testimonial_wrapper"),o=r.helpers.find(e,".feedier-widget__wrapper").offsetWidth,p=0,f=l.childElementCount;1===f&&r.helpers.addClass(r.helpers.find(e,".feedier-widget__control .fa-right-arrow"),"disabled");var c=1;e.querySelectorAll(".feedier-widget__control i").forEach((function(t){t.addEventListener("click",(function(t){"right"==(t.target.classList.contains("fa-right-arrow")?"right":"left")?(++c===f&&r.helpers.addClass(r.helpers.find(e,".feedier-widget__control .fa-right-arrow"),"disabled"),c>1&&r.helpers.removeClass(r.helpers.find(e,".feedier-widget__control .fa-left-arrow"),"disabled"),p-=o):(1==--c&&r.helpers.addClass(r.helpers.find(e,".feedier-widget__control .fa-left-arrow"),"disabled"),c<f&&r.helpers.removeClass(r.helpers.find(e,".feedier-widget__control .fa-right-arrow"),"disabled"),p+=o);var i=e.querySelectorAll(".feedier-widget__testimonial")[c-1].firstElementChild.offsetHeight;e.querySelector(".feedier-widget__wrapper").style.height="".concat(i+25,"px"),r.helpers.find(e,".feedier-widget__testimonial_wrapper").style.transform="translateX("+p+"px)"}))}))},s=function(e,t){var i='<div class="feedier-widget__wrapper"><div class="feedier-widget__score"><span></span></div><div class="feedier-widget__content"><div class="feedier-widget__name"><span></span></div><div class="feedier-widget__description"><span></span></div></div><a href="#" class="feedier-widget__share"><i class="fa-old-school fa-share-alt-square"></i></a><ul class="feedier-widget__share__dropdown"><li><a href="#" class="feedier-widget__facebook-link" target="_blank" rel="nofollow">'+t.localization.shareOnFacebook+'</a></li><li><a href="#" class="feedier-widget__twitter-link" target="_blank" rel="nofollow">'+t.localization.shareOnTwitter+'</a></li></ul><div class="feedier-widget__by"><span></span></div></div>';e.insertAdjacentHTML("beforeend",i);var a=r.helpers.find(e,".feedier-widget__score");r.helpers.find(a,"span").innerHTML=t.avg_satisfaction_ratio+"%",t.avg_satisfaction_ratio<25?r.helpers.addClass(a,"danger"):t.avg_satisfaction_ratio<75&&r.helpers.addClass(a,"warning"),r.helpers.find(e,".feedier-widget__name span").innerHTML=t.name,r.helpers.find(e,".feedier-widget__description span").innerHTML=t.localization.description,t.white_label||(r.helpers.find(e,".feedier-widget__by span").innerHTML='<a href="'.concat(r.home+r.utm,'"\n                                             title="Feedier"\n                                             target="_blank">\n                                                 ').concat(t.localization.by,' <img src="').concat(r.home+"/images/global/logo-dark.png",'">\n                                          </a>'));var n=t.localization.sharedContent;r.helpers.find(e,".feedier-widget__twitter-link").setAttribute("href","https://twitter.com/intent/tweet?url="+encodeURIComponent(window.location.href)+"&text="+encodeURI(n)+"&via=feedier"),r.helpers.find(e,".feedier-widget__facebook-link").setAttribute("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(window.location.href)+"&quote="+encodeURI(n)),r.helpers.find(e,".feedier-widget__share").addEventListener("click",(function(t){t.preventDefault(),r.helpers.toggleClass(r.helpers.find(e,".feedier-widget__share__dropdown"),"feedier-widget__share__dropdown_open")}))},l=function(e,t){e.insertAdjacentHTML("beforeend",'<div class="feedier-widget__wrapper">\n                        <div class="feedier-widget__path"><img></div>\n                        <div class="feedier-widget__name"><span></span></div>\n                        <div class="feedier-widget__details"><span></span></div>\n                        <div class="feedier-widget__by"><span></span></div>\n                        </div>'),r.helpers.find(e,".feedier-widget__name span").innerHTML=t.reward_name,r.helpers.find(e,".feedier-widget__path img").src=t.path,r.helpers.find(e,".feedier-widget__details span").innerHTML=t.localization.details,t.white_label||(r.helpers.find(e,".feedier-widget__by span").innerHTML='<a href="'.concat(r.home+r.utm,'"\n                                             title="Feedier"\n                                             target="_blank">\n                                                 ').concat(t.localization.by,' <img src="').concat(r.home+"/images/global/logo-dark.png",'">\n                                          </a>'))},o=function(e,t){var i=!1;if(r.engager.isVisible()||r.helpers.getData(e,"force")){var n=!!r.helpers.getData(e,"preview")&&r.helpers.getData(e,"preview"),d=r.helpers.getData(e,"display-probability")?r.helpers.getData(e,"display-probability"):100;if(!(Math.random()>d/100)){var s=r.helpers.getData(e,"position")?r.helpers.getData(e,"position"):"right";r.helpers.addClass(e,"feedier-widget--"+s);var l=r.helpers.getData(e,"layout")?r.helpers.getData(e,"layout"):"horizontal";if(r.helpers.addClass(e,"feedier-widget--"+l),r.helpers.getData(e,"offset-x")&&r.helpers.getData(e,"offset-x")>0&&("left"===s?e.css("left",r.helpers.getData(e,"offset-x")):e.css("right",r.helpers.getData(e,"offset-x"))),r.helpers.getData(e,"offset-y")&&r.helpers.getData(e,"offset-y")>0&&e.css("bottom",r.helpers.getData(e,"offset-y")),r.helpers.getData(e,"shake")&&!0===r.helpers.getData(e,"shake")&&window.innerWidth>767){var o=0;setInterval((function(){10!=++o||i||(r.engager.toggle(!1),r.engager.shake())}),1e3)}var p="small"===r.helpers.getData(e,"size")?"small":"medium";r.helpers.addClass(e,"feedier-widget--"+p);var f='<div class="feedier-widget__container"><a href="#" class="feedier-widget__caller is-closed"><span class="feedier-widget__caller__reward"></span><span class="feedier-widget__caller__name">'+t.localization.widgetGiveFeedback+'</span><span class="feedier-widget__caller__label"><span class="feedier-widget__caller__avg-time"></span> '+t.localization.min+'</span></a><div class="feedier-widget__popup is-closed"><div class="feedier-widget__popup__wrapper"><a href="#" class="feedier-widget__popup__action feedier-widget__popup__action__close"><i class="fa-old-school fa-times"></i></a><i class="feedier-widget__icon fd fd-engage fd--sm"></i><span class="feedier-widget__name">'+t.localization.widgetYouMatter+"</span>";if(t.engager_widget_content?f+="<p>"+t.engager_widget_content+"</p>":(f+='<ul class="feedier-weidget__list">',t.localization.widgetGetAChance&&(f+="<li>".concat(t.localization.widgetGetAChance,' <span class="feedier-widget__reward"></span></li>')),t.average_time&&(f+="<li>".concat(t.localization.widgetAverageTime,' <span class="feedier-widget__avg-time"></span> ').concat(t.localization.min,"</li>")),f+="<li>".concat(t.localization.widgetGoodExperience,"</li>\n                        </ul>")),f+='<a href="#" target="_blank" class="feedier-widget__button">'+t.localization.widgetLetsGo+'</a><div class="feedier-widget__by"><span></span></div></div></div></div>',e.insertAdjacentHTML("beforeend",f),r.helpers.getData(e,"extra-line")&&(r.helpers.find(e,".feedier-widget__popup__wrapper ul").innerHTML="<li>"+r.helpers.getData(e,"extra-line")+"</li>"),t.reward){r.helpers.addClass(e,"has-reward"),r.helpers.find(e,".feedier-widget__probability")&&(r.helpers.find(e,".feedier-widget__probability").innerText=t.reward.probability),r.helpers.find(e,".feedier-widget__reward")&&(r.helpers.find(e,".feedier-widget__reward").innerText=t.reward.name);var c=r.helpers.getData(e,"widget-title")?r.helpers.getData(e,"widget-title"):t.localization.widgetGetReward;r.helpers.find(e,".feedier-widget__caller__reward")&&(r.helpers.find(e,".feedier-widget__caller__reward").innerText=c)}else{var g=r.helpers.find(e,".feedier-widget__caller__name"),_=r.helpers.getData(e,"widget-title")?r.helpers.getData(e,"widget-title"):g.textContent;g.innerHTML="<b>"+_+"</b>"}var h="".concat(t.url,"?source=").concat(encodeURIComponent(window.location.href)),w=!1;r.helpers.getData(e,"email")&&(h+="&email="+r.helpers.getData(e,"email"));var u=r.helpers.getData(e,"custom-fields")||r.helpers.getData(e,"context-attributes");if(u&&(h+="&"+u),r.helpers.getData(e,"in-site")){h+="&no_header=true";var v=function(){var t=r.helpers.find(e,".feedier-widget__popup__wrapper"),i=.7;window.innerWidth<900?i=.9:"small"===p&&window.innerWidth>=900&&(i=.3),t.querySelectorAll("*").forEach((function(e){(e.classList.contains("feedier-weidget__list")||e.classList.contains("feedier-widget__button")||e.classList.contains("feedier-widget__name")||e.classList.contains("feedier-widget__by")||e.classList.contains("feedier-widget__icon"))&&r.helpers.removeElement(e)})),t.parentNode.style.width="".concat(window.innerWidth*i,"px"),t.parentNode.style.height="".concat(window.innerHeight-200,"px"),setTimeout((function(){if(!w){w=!0;var e=document.createElement("div");e.className="feedier-widget__popup__wrapper__iframe",e.innerHTML='<iframe src="'+h+'" width="100%" height="100%" frameBorder="0"></iframe>',t.appendChild(e)}}),500),r.helpers.find(t,".feedier-widget__popup__action__full")||t.insertAdjacentHTML("beforeend",'<a href="#" class="feedier-widget__popup__action feedier-widget__popup__action__full"><i class="fa-old-school fa-expand-arrows-alt"></i></a>'),r.helpers.find(t,".feedier-widget__popup__action__full")&&!r.helpers.find(t,".feedier-widget__popup__action__listened")&&(r.helpers.find(t,".feedier-widget__popup__action__full").addEventListener("click",(function(){return t.classList.contains("feedier-widget__popup__wrapper--full")?(r.helpers.removeClass(t,"feedier-widget__popup__wrapper--full"),setTimeout((function(){t.parentNode.style.top="",t.parentNode.style.right="",t.parentNode.style.bottom="",t.parentNode.style.left="",t.parentNode.style.position="",t.parentNode.style.width="".concat(window.innerWidth*i,"px"),t.parentNode.style.height="".concat(window.innerHeight-200,"px"),t.parentNode.classList.contains("feedier-widget__popup--full")&&t.parentNode.classList.remove("feedier-widget__popup--full")}),400),t):(r.helpers.addClass(t,"feedier-widget__popup__wrapper--full"),window.innerWidth>767?(t.parentNode.style.top="0",t.parentNode.style.right="0",t.parentNode.style.bottom="0",t.parentNode.style.left="0",t.parentNode.style.position="fixed",t.parentNode.style.width="auto",t.parentNode.style.height="auto"):t.parentNode.classList.add("feedier-widget__popup--full"),t)})),r.helpers.addClass(r.helpers.find(t,".feedier-widget__popup__action__full"),"feedier-widget__popup__action__listened"))},m=r.helpers.find(e,".feedier-widget__button");m&&m.addEventListener("click",(function(e){e.preventDefault(),v()})),window.addEventListener("resize",(function(){w&&v()}));var y=r.helpers.getData(e,"skip-intro");null!==y&&("true"===y||"TRUE"===y)&&setTimeout((function(){v()}),500)}else{var b=r.helpers.find(e,".feedier-widget__button");b.setAttribute("href",h),b.setAttribute("target","_blank")}var D=r.helpers.find(e,".feedier-widget__button");D&&(D.style.backgroundColor=t.color);var T=r.helpers.find(e,".feedier-widget__caller__avg-time");T&&(T.innerText=t.average_time);var C=r.helpers.find(e,".feedier-widget__avg-time");C&&(C.innerText=t.average_time),t.white_label||(r.helpers.find(e,".feedier-widget__by span").innerHTML="".concat(t.localization.by,' <a href="').concat(r.home+r.utm,'"\n                                                                     target="_blank"><img src="').concat(r.home+"/images/global/logo-dark.png",'">\n                                                                  </a>')),t.average_time||r.helpers.removeElement(r.helpers.find(e,".feedier-widget__caller > .feedier-widget__caller__label")),t.reward||(r.helpers.removeElement(r.helpers.find(e,".feedier-widget__caller .feedier-widget__caller__reward")),r.helpers.removeElement(r.helpers.find(e,".feedier-widget__popup .feedier-widget__caller__reward > li"))),r.helpers.find(e,".feedier-widget__caller")&&r.helpers.find(e,".feedier-widget__caller").addEventListener("click",(function(e){e.preventDefault(),i=!0,r.engager.toggle(!1)}));var k=r.helpers.find(e,".feedier-widget__popup__action__close");k&&k.addEventListener("click",(function(e){e.preventDefault(),w&&!n?!0===confirm(t.localization.widgetConfirm)&&r.engager.hide(n):r.engager.hide(n)})),!r.helpers.getData(e,"in-site")&&r.helpers.find(e,".feedier-widget__button")&&r.helpers.find(e,".feedier-widget__button").addEventListener("click",(function(){r.engager.hide(n)})),e.dispatchEvent(a),feedierWidget.engager.initialized=!0}}};!function(){if(r.$widgets=document.querySelectorAll(".feedier-widget"),0===r.$widgets.length)return n('No widget found. Please make sure your page contains a ".feedier-widget" element');!function(){var e=document.head;if(r.helpers.find(document,"head #feedier-widget-style"))return null;var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=r.home+"/css/widgets.min.css",e.appendChild(t)}(),r.$widgets.forEach((function(t){if(!function(t){var i=r.helpers.getData(t,"init");return!(null!==i&&"true"!==i&&"TRUE"!==i&&!e||(r.helpers.getData(t,"type")&&-1!==["score","engager","score-carrier","testimonial","certificate"].indexOf(r.helpers.getData(t,"type"))?!r.helpers.getData(t,"key")&&(n("The Feedier public key is missing"),1):(n("The data-type is either not set or not valid."),1)))}(t))return null;r.helpers.addClass(t,"is-loading");var i={api_key:r.helpers.getData(t,"key")};"engager"!==r.helpers.getData(t,"type")&&"score-carrier"!==r.helpers.getData(t,"type")&&"testimonial"!==r.helpers.getData(t,"type")||(i.carrier_id=r.helpers.getData(t,"carrier-id")),"certificate"===r.helpers.getData(t,"type")&&(i.team_id=r.helpers.getData(t,"team"));var a=new XMLHttpRequest;a.open("GET",r.endpoint+"/widget/"+r.helpers.getData(t,"type")+"?"+r.helpers.buildQuery(i),!0),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.onload=function(){if(a.status>=200&&a.status<400){var e=JSON.parse(a.responseText);"score"!==r.helpers.getData(t,"type")&&"score-carrier"!==r.helpers.getData(t,"type")||s(t,e),"engager"===r.helpers.getData(t,"type")&&o(t,e),"certificate"===r.helpers.getData(t,"type")&&l(t,e),"testimonial"===r.helpers.getData(t,"type")&&d(t,e),r.helpers.addClass(t,"is-ready"),r.helpers.removeClass(t,"is-loading")}},a.onerror=function(){var e=a.responseText;t.innerHtml="An error happened.",r.helpers.removeClass(t,"is-loading"),n(e.responseJSON.error)},a.send(),r.helpers.addClass(t,"feedier-widget--"+r.helpers.getData(t,"type"))}))}()},helpers:{removeElement:function(e){e&&e.parentNode.removeChild(e)},fadeOut:function(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<0?e.style.display="none":requestAnimationFrame(t)}()},buildQuery:function(e){if("string"==typeof e)return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},addClass:function(e,t){e.classList.add(t)},removeClass:function(e,t){e.classList.remove(t)},toggleClass:function(e,t){e.classList.toggle(t)},getData:function(e,t){return e.getAttribute("data-"+t)},find:function(e,t){return e.querySelector(t)}},engager:{displayed:!1,show:function(){var e=window.feedierWidget,t=e.engager.getTarget();if(t){if(t.style.display="block",t.style.opacity="1",window.localStorage.removeItem("feedier.widget"),!e.engager.displayed)return e.init(!0),void(e.engager.displayed=!0);t.dispatchEvent(d)}},hide:function(e){var t=window.feedierWidget,i=t.engager.getTarget(),r=new Date,a=t.helpers.getData(i,"expiration")?parseInt(t.helpers.getData(i,"expiration")):31;i&&(t.engager.toggle(!1),e||(t.helpers.fadeOut(i),window.localStorage.setItem("feedier.widget",JSON.stringify({carrier_id:t.helpers.getData(i,"carrier-id"),expiration:r.getTime()+24*a*60*60*1e3})),i.dispatchEvent(n)))},isVisible:function(){var e=window.localStorage.getItem("feedier.widget"),t=window.feedierWidget,i=t.engager.getTarget(),r=new Date;if(!i||t.engager.initialized)return!1;if(!e)return!0;if("false"===e)return!1;var a=JSON.parse(e);return!a.carrier_id||!a.expiration||parseInt(t.helpers.getData(i,"carrier-id"))!==parseInt(a.carrier_id)||r.getTime()>parseInt(a.expiration)},toggle:function(){var e=window.feedierWidget,t=e.engager.getTarget();t&&(e.helpers.toggleClass(e.helpers.find(t,".feedier-widget__caller"),"is-closed"),e.helpers.toggleClass(e.helpers.find(t,".feedier-widget__popup"),"is-closed"),e.helpers.toggleClass(t,"is-closed"),e.helpers.find(t,".feedier-widget__caller.is-closed")?t.dispatchEvent(n):t.dispatchEvent(d))},shake:function(){var e=window.feedierWidget,t=e.engager.getTarget();t&&(e.helpers.addClass(t,"is-shaking"),setTimeout((function(){e.helpers.removeClass(t,"is-shaking")}),1e3))},getTarget:function(){var e=null;return window.feedierWidget.$widgets.forEach((function(t){"engager"===t.getAttribute("data-type")&&(e=t)})),e}}},window.feedierWidget.init()}]);