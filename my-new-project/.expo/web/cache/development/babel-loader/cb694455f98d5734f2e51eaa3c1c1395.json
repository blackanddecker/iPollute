{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/augmenta/Desktop/Project/iPollute/my-new-project/components/MealList.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { AntDesign } from '@expo/vector-icons';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { FontAwesome } from '@expo/vector-icons';\nimport Colors from \"../constants/Colors\";\nimport MealItem from \"./MealItem\";\n\nvar MealList = function (_Component) {\n  _inherits(MealList, _Component);\n\n  var _super = _createSuper(MealList);\n\n  function MealList(props) {\n    var _this;\n\n    _classCallCheck(this, MealList);\n\n    _this = _super.call(this, props);\n\n    _this.setUpdateModalVisible = function (bool) {\n      _this.setState({\n        isModalVisible: bool\n      });\n    };\n\n    _this.openUpdateModal = function () {\n      _this.setState({\n        isUpdateModalVisible: true\n      });\n    };\n\n    _this.toggleUpdateModal = function () {\n      _this.setState({\n        isUpdateModalVisible: !_this.state.isUpdateModalVisible\n      });\n    };\n\n    _this.closeUpdateModal = function () {\n      _this.setState({\n        isUpdateModalVisible: false\n      });\n    };\n\n    _this.openDeleteModal = function () {\n      _this.setState({\n        isDeleteModalVisible: true\n      });\n    };\n\n    _this.toggleDeleteModal = function () {\n      _this.setState({\n        isDeleteModalVisible: !_this.state.isDeleteModalVisible\n      });\n    };\n\n    _this.closeDeleteModal = function () {\n      _this.setState({\n        isDeleteModalVisible: false\n      });\n    };\n\n    _this.deleteEnergy = function (userId, energyId) {\n      alert(\"userId:\", userId);\n      fetch('http://192.168.1.4:5000/deleteEnergy', {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId: userId,\n          energyId: energyId\n        }),\n        method: 'POST'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        console.log(responseJson);\n\n        if (responseJson['success'] == true) {\n          alert(\"Energy Deleted Succefully\");\n        } else {\n          alert(\"Energy deleted Failed\");\n        }\n      }).catch(function (error) {\n        console.error(error);\n        alert(\"Delete Failed\");\n      });\n    };\n\n    _this.setInputText = function (text) {\n      _this.setState({\n        inputText: text\n      });\n    };\n\n    _this.setEditedItem = function (id) {\n      _this.setState({\n        editedItem: id\n      });\n    };\n\n    _this.handleEditItem = function (editedItem) {\n      var newData = _this.state.data.map(function (item) {\n        if (item.id === editedItem) {\n          item.text = _this.state.inputText;\n          return item;\n        }\n\n        return item;\n      });\n\n      _this.setState({\n        data: newData\n      });\n    };\n\n    _this.renderItem = function (_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: styles.item,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.marginLeft,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"directions-bus\",\n        size: 24,\n        color: Colors.primaryColor,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }\n      })), React.createElement(Text, {\n        style: styles.text,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, \" Date: \", item.energyDate, \" \"), React.createElement(Text, {\n        style: styles.text,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }\n      }, \" Energy Cost: \", item.energyCost, \". Total Cost: \", item.cost, \" \"), React.createElement(View, {\n        style: styles.marginRight,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          return _this.openUpdateModal();\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"change-history\",\n        size: 30,\n        color: Colors.primaryColor,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      })), React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          return _this.openDeleteModal();\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"delete\",\n        size: 30,\n        color: Colors.primaryColor,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }))));\n    };\n\n    _this.state = {\n      data: _this.props['list'],\n      isUpdateModalVisible: false,\n      isDeleteModalVisible: false,\n      inputText: '',\n      editedItem: 0\n    };\n    return _this;\n  }\n\n  _createClass(MealList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(\"State data\", this.state.data);\n      return React.createElement(View, {\n        style: styles.contentContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, React.createElement(FlatList, {\n        data: this.props['list'],\n        renderItem: this.renderItem,\n        keyExtractor: function keyExtractor(item) {\n          return item.energyId.toString();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      })), React.createElement(Modal, {\n        visible: this.state.isModalVisible,\n        onRequestClose: function onRequestClose() {\n          return _this2.setModalVisible(false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.modalView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.text,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }, \"Change text:\"), React.createElement(TextInput, {\n        style: styles.textInput,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            inputText: text\n          });\n\n          console.log('state ', _this2.state.inputText);\n        },\n        defaultValue: this.state.inputText,\n        editable: true,\n        multiline: false,\n        maxLength: 200,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }\n      }), React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          _this2.handleEditItem(_this2.state.editedItem);\n\n          _this2.setModalVisible(false);\n        },\n        style: [styles.touchableHighlight, {\n          backgroundColor: 'orange'\n        }],\n        underlayColor: '#f1f1f1',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.text,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }\n      }, \"Save\")))), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, React.createElement(Modal, {\n        animationIn: \"slideInUp\",\n        animationOut: \"slideOutDown\",\n        onBackdropPress: function onBackdropPress() {\n          return _this2.closeDeleteModal();\n        },\n        onSwipeComplete: function onSwipeComplete() {\n          return _this2.closeDeleteModal();\n        },\n        swipeDirection: \"right\",\n        isVisible: this.state.isDeleteModalVisible,\n        width: \"90%\",\n        \"max-height\": \"40%\",\n        style: {\n          backgroundColor: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.text,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }\n      }, \"Are you sure you want to delete this energy footprint ??\"), React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          position: 'absolute',\n          bottom: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          flexDirection: 'row'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          backgroundColor: 'red',\n          width: '50%'\n        },\n        onPress: function onPress() {\n          return _this2.closeDeleteModal();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white',\n          textAlign: 'center',\n          padding: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 33\n        }\n      }, \"Cancel\")), React.createElement(TouchableOpacity, {\n        style: {\n          backgroundColor: 'green',\n          width: '50%'\n        },\n        onPress: function onPress() {\n          return _this2.deleteEnergy(_this2.state.userId, _this2.state.energyId);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white',\n          textAlign: 'center',\n          padding: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 33\n        }\n      }, \"Save\")))))));\n    }\n  }]);\n\n  return MealList;\n}(Component);\n\n;\nvar styles = StyleSheet.create({\n  list: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 15\n  },\n  headerText: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: 'white'\n  },\n  contentContainer: {\n    backgroundColor: 'white'\n  },\n  item: {\n    flexDirection: 'row',\n    borderBottomColor: 'grey',\n    alignItems: 'center'\n  },\n  marginLeft: {\n    marginLeft: 5\n  },\n  marginRight: {\n    justifyContent: 'flex-end'\n  },\n  menu: {\n    width: 20,\n    height: 2,\n    backgroundColor: '#111',\n    margin: 2,\n    borderRadius: 3\n  },\n  text: {\n    marginVertical: 30,\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginLeft: 10\n  },\n  textInput: {\n    width: '90%',\n    marginLeft: 10,\n    marginRight: 10,\n    marginBottom: 30,\n    borderColor: 'gray',\n    fontSize: 16\n  },\n  modalView: {\n    flex: 1,\n    backgroundColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  touchableHighlight: {\n    backgroundColor: 'white',\n    marginVertical: 10,\n    alignSelf: 'stretch',\n    alignItems: 'center'\n  }\n});\nexport default MealList;","map":{"version":3,"sources":["/home/augmenta/Desktop/Project/iPollute/my-new-project/components/MealList.js"],"names":["React","Component","AntDesign","MaterialIcons","MaterialCommunityIcons","FontAwesome","Colors","MealItem","MealList","props","setUpdateModalVisible","bool","setState","isModalVisible","openUpdateModal","isUpdateModalVisible","toggleUpdateModal","state","closeUpdateModal","openDeleteModal","isDeleteModalVisible","toggleDeleteModal","closeDeleteModal","deleteEnergy","userId","energyId","alert","fetch","headers","body","JSON","stringify","method","then","response","json","responseJson","console","log","catch","error","setInputText","text","inputText","setEditedItem","id","editedItem","handleEditItem","newData","data","map","item","renderItem","styles","marginLeft","primaryColor","energyDate","energyCost","cost","marginRight","contentContainer","toString","setModalVisible","modalView","textInput","touchableHighlight","backgroundColor","flex","justifyContent","position","bottom","flexDirection","width","color","textAlign","padding","StyleSheet","create","list","alignItems","headerText","fontSize","fontWeight","borderBottomColor","menu","height","margin","borderRadius","marginVertical","marginBottom","borderColor","alignSelf"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {StyleSheet, Text, View, FlatList,  TextInput, Modal, TouchableHighlight, TouchableOpacity  } from 'react-native';\nimport { AntDesign } from '@expo/vector-icons'; \nimport { MaterialIcons } from '@expo/vector-icons'; \nimport { MaterialCommunityIcons } from '@expo/vector-icons'; \nimport { FontAwesome } from '@expo/vector-icons';\nimport Colors from '../constants/Colors';\n\nimport MealItem from './MealItem';\n\nclass MealList extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        data: this.props['list'],\n        isUpdateModalVisible: false,\n        isDeleteModalVisible: false,\n        inputText: '',\n        editedItem: 0, \n        };\n  }\n\n  setUpdateModalVisible = (bool) => {this.setState({ isModalVisible: bool })}\n\n\n  openUpdateModal = () =>{this.setState({isUpdateModalVisible:true})}\n  toggleUpdateModal = () =>{this.setState({isUpdateModalVisible:!this.state.isUpdateModalVisible})}\n  closeUpdateModal = () =>{this.setState({isUpdateModalVisible:false})}\n\n  openDeleteModal = () =>{this.setState({isDeleteModalVisible:true})}\n  toggleDeleteModal = () =>{this.setState({isDeleteModalVisible:!this.state.isDeleteModalVisible})}\n  closeDeleteModal = () =>{this.setState({isDeleteModalVisible:false})}\n\n\n\n\n  deleteEnergy = (userId, energyId) => {\n    alert(\"userId:\", userId)\n    \n    fetch('http://192.168.1.4:5000/deleteEnergy', {\n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n        userId: userId,\n        energyId:energyId\n    }),\n    method: 'POST'\n    })\n    .then((response) => response.json())\n    .then((responseJson) => {\n        console.log(responseJson);\n        if(responseJson['success'] == true){\n            alert(\"Energy Deleted Succefully\");\n        }\n        else{\n            alert(\"Energy deleted Failed\");\n        }\n        \n    })\n    .catch((error) => {\n        console.error(error);\n        alert(\"Delete Failed\");\n        });\n    }\n\n  setInputText = (text) => {\n      this.setState({ inputText: text })\n  }\n\n  setEditedItem = (id) => {\n      this.setState({ editedItem: id })\n  }\n        \n  handleEditItem = (editedItem) => {\n      const newData = this.state.data.map( item => {\n          if (item.id === editedItem ) {\n              item.text = this.state.inputText\n              return item\n          }\n          return item\n      })\n      this.setState({ data: newData })\n  }\n\n renderItem = ({ item }) => {\n    return (\n        // <TouchableHighlight onPress={() => {this.setModalVisible(true); this.setInputText(item.text), this.setEditedItem(item.id)}}\n        //     underlayColor={'#f1f1f1'}> \n            <View style={styles.item} >\n                <View style={styles.marginLeft}>\n                    <MaterialIcons name=\"directions-bus\" size={24} color={Colors.primaryColor} />\n                </View>\n                <Text style={styles.text}> Date: {item.energyDate} </Text>\n                <Text style={styles.text}> Energy Cost: {item.energyCost}. Total Cost: {item.cost} </Text>\n                <View style={styles.marginRight}>\n                <TouchableHighlight onPress={()=>this.openUpdateModal()}>\n                    <MaterialIcons name=\"change-history\" size={30} color={Colors.primaryColor} />\n                </TouchableHighlight>\n\n                <TouchableHighlight onPress={()=>this.openDeleteModal()}>\n                    <MaterialIcons name=\"delete\" size={30} color={Colors.primaryColor} />\n                </TouchableHighlight>\n\n                </View>\n            </View>\n        // </TouchableHighlight>\n    );\n  };\n\n  render() {\n      console.log(\"State data\", this.state.data)\n\n    return (\n        <View style={styles.contentContainer}>\n            <View>\n            <FlatList \n                data={this.props['list']}\n                renderItem={this.renderItem}\n                keyExtractor={(item) => item.energyId.toString()}\n            />\n            </View>\n\n\n\n\n\n\n\n\n\n\n\n            <Modal visible={\n                this.state.isModalVisible} \n                onRequestClose={() => this.setModalVisible(false)}>\n                \n                <View style={styles.modalView}>\n                    <Text style={styles.text}>Change text:</Text>\n                    <TextInput\n                        style={styles.textInput}\n                        onChangeText={(text) => {this.setState({inputText: text}); console.log('state ', this.state.inputText)}}\n                        defaultValue={this.state.inputText}\n                        editable = {true}\n                        multiline = {false}\n                        maxLength = {200}\n                    /> \n                    <TouchableHighlight onPress={() => {this.handleEditItem(this.state.editedItem); this.setModalVisible(false)}} \n                        style={[styles.touchableHighlight, {backgroundColor: 'orange'}]} underlayColor={'#f1f1f1'}>\n                        <Text style={styles.text}>Save</Text>\n                    </TouchableHighlight>  \n            \n                </View>           \n            </Modal> \n        \n        \n\n\n\n\n\n            {/* DELETE ENERGY MODAL */}\n            <View>\n                <Modal animationIn=\"slideInUp\" \n                    animationOut=\"slideOutDown\" \n                    onBackdropPress={()=>this.closeDeleteModal()}\n                    onSwipeComplete={()=>this.closeDeleteModal()} \n                    swipeDirection=\"right\" \n                    isVisible={this.state.isDeleteModalVisible} \n                    width=\"90%\"\n                    max-height=\"40%\"\n                    style={{backgroundColor:'white'}}>\n                    <Text style = {styles.text}>Are you sure you want to delete this energy footprint ??</Text>\n                    <View style={{ flex: 1,justifyContent:'center',position:'absolute',bottom:0}}>\n                        <View style={{flexDirection:'row',}}>\n                            <TouchableOpacity style={{backgroundColor:'red',width:'50%'}} onPress={()=>this.closeDeleteModal()}>\n                                <Text style={{color:'white',textAlign:'center',padding:10}}>Cancel</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity \n                                style={{backgroundColor:'green',width:'50%'}} \n                                onPress={()=>this.deleteEnergy(\n                                    this.state.userId,\n                                    this.state.energyId)} >\n                                <Text style={{color:'white',textAlign:'center',padding:10}}>Save</Text>\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                </Modal>\n            </View>\n\n\n        </View>\n    )\n  }\n};\n      \nconst styles = StyleSheet.create({\n    list: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: 15\n    },\n    headerText: {\n        fontSize: 20,\n        fontWeight: 'bold',\n        color: 'white',\n    },\n    contentContainer: {\n        backgroundColor: 'white',\n    },\n    item: {\n        flexDirection: 'row',\n        borderBottomColor: 'grey',\n        alignItems: 'center',\n    },\n    marginLeft: {\n        marginLeft: 5,\n    },\n    marginRight: {\n        justifyContent: 'flex-end',\n    },\n    menu: {\n        width: 20,\n        height: 2,\n        backgroundColor: '#111',\n        margin: 2,\n        borderRadius: 3,\n    },\n    text: {\n        marginVertical: 30,\n        fontSize: 20,\n        fontWeight: 'bold',\n        marginLeft: 10,\n    },\n\n    textInput: {\n        width: '90%',\n        marginLeft: 10,\n        marginRight: 10,\n        marginBottom: 30,\n        borderColor: 'gray', \n        fontSize: 16,\n    },\n    modalView: {\n        flex: 1, \n        backgroundColor: 'white',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    touchableHighlight: {\n        backgroundColor: 'white', \n        marginVertical: 10,\n        alignSelf: 'stretch',\n        alignItems: 'center',\n    } \n});\n      \nexport default MealList;"]},"metadata":{},"sourceType":"module"}